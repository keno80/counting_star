# 架构分层边界（UI / domain / data）

## 目标

- 职责清晰：每层只做本层事情
- 依赖单向：UI → domain → data → core
- 可测试：domain 不依赖 Android

## 分层职责

### UI（app / feature-xxx）

- 展示与交互：Compose UI、导航、状态组合
- 只调用 domain 的 UseCase 或 Repository 接口
- 不直接访问 Room/DataStore/Network

### domain

- 业务规则与用例（UseCase / Interactor）
- 纯 Kotlin，不依赖 Android 组件
- 定义 Repository 接口与业务模型

### data

- 数据源实现：Room/DataStore/Network
- Repository 实现与数据映射
- 负责缓存与数据一致性策略

### core

- 通用工具与基础能力
- 与业务无关的复用代码

## 依赖规则

- app / feature-xxx 依赖 domain 与必要的 UI 基础库
- domain 只依赖 core
- data 依赖 domain 与 core
- 任何层禁止反向依赖上层

## 模型与映射

- domain 模型为对外契约
- data 实体为内部实现
- data 层完成 entity ↔ domain 的映射

## 允许与禁止

- 允许：UI 调用 UseCase，UseCase 调用 Repository
- 禁止：UI 直接访问 Room/DataStore
- 禁止：domain 引入 Android SDK
