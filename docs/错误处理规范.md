# 错误处理规范（Result / 异常映射）

## 目标

- 统一错误表示，避免层间直接抛异常
- 可预测的错误流转与 UI 提示
- 便于日志与埋点

## 基本原则

- data 层捕获异常并映射为业务错误
- domain 层只暴露 Result 类型
- UI 层只处理 Result，不直接处理异常

## Result 定义

- Result.Success(data)
- Result.Error(error)

## Error 分类

- Network（网络/超时/无连接）
- Auth（鉴权/权限）
- NotFound（资源不存在）
- Validation（参数校验）
- Database（本地存储）
- Unknown（兜底）

## 异常映射

- data 层统一使用 Exception → AppError 映射函数
- domain 层不引入 Android 异常类型
- UI 层只展示 AppError 的 userMessage

## UI 处理策略

- 可恢复错误：提示用户重试
- 不可恢复错误：提示并退出当前流程
- 记录 errorCode 以便排查

## 约束

- 禁止在 UI 层 try/catch 业务异常
- 禁止在 domain 层引用具体数据源异常
